@model GuestUpload

@functions {
    private IEnumerable<SelectListItem> GetVisibilityList()
    {
        return new List<SelectListItem>
        {
            new SelectListItem { Value = "Public", Text = "Public" },
            new SelectListItem { Value = "Private", Text = "Private" },
        };
    }

}

@{
    ViewBag.Title = "Edit Upload";
    Layout = "_Layout";
}

<h2>Edit Upload</h2>
<form method="post" enctype="multipart/form-data">
    @Html.AntiForgeryToken()

    <input asp-for="Title" placeholder="Upload Title" maxlength="80" />
    <br />
    <input asp-for="ShortDescription" placeholder="Write a short Description" maxlength="500" />
    <br />
    <textarea asp-for="Content" placeholder="Write what's on your mind..." rows="15" style="width: 100%;">
        @Model.Content
    </textarea>

    <h4>Upload Some Files</h4>
    <input type="file" name="FileInput" multiple />

    @Html.DropDownListFor(model => model.Visibility, GetVisibilityList(), "", new { @class = "form-control", @name = "Visibility" })

    <script type="text/javascript">
        function deleteFile(id) {
            document.getElementById(id).value = "Deleted"
        }
    </script>

    @foreach (var file in Model.Files)
    {
        <p>@file.Filename</p>
        <a target="_blank" href="/Uploads/DeleteFile/@file.Id">
            <button id="file-delete-btn-@file.Id" onclick="deleteFile('file-delete-btn-@file.Id')" type="button">
                Delete File
            </button>
        </a>
    }
    <button type="submit">Save Changes</button>
    <p>@ViewData["LoadText"]</p>
</form>

<a href="/uploads/delete/@Model.Id">
    Delete
</a>
